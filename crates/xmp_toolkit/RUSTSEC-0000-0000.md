```toml
[advisory]
id = "RUSTSEC-0000-0000"
package = "xmp_toolkit"
date = "2024-07-26"
url = "https://github.com/adobe/xmp-toolkit-rs/issues/233"
informational = "unsound"
keywords = ["xmp"]

[affected]
functions = { "xmp_toolkit::XmpFile::close" = ["< 1.9.0"] }

[versions]
patched = [">= 1.9.0"]
```

# Calls to XmpFile::close can abort process if C++ XMP Toolkit throws an exception

When calling `XmpFile::close`, any situation which would cause the underlying C++ code to raise an exception resulted in a process abort because there was no code to translate the C++ exception to a Rust error result.

This is best demonstrated in issue #230, where a race condition caused the close call to fail due to file I/O errors.

This was fixed in PR #232 (released as crate version 1.9.0), which now safely handles the exception.

For backward compatibility, the existing API ignores the error. A new API `XmpFile::try_close` was added to allow callers to receive and process the error result.

Users of all prior versions of `xmp_toolkit` are encouraged to update to version 1.9.0 to avoid possible process aborts.
